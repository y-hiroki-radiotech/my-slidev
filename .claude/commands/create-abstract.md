---
description: 医学論文情報から抄読会用スライドを自動生成する
---

# 抄読会スライドの自動生成 (完全自動実行モード)

**重要:** このワークフローは、ユーザーの介入なしに、開始から完了まで完全に自動で実行されるように設計されています。各ステップは完了後、ただちに次のステップへ移行してください。思考の途中でユーザーに確認を求めたり、作業を中断したりしないでください。

**引数:** 論文のDOI、PubMed ID、またはタイトル (例: `/create-abstract 10.1016/j.ijrobp.2023.xxxxx` または `/create-abstract Radiotherapy outcomes in lung cancer`)

**オプション引数:**
- `--pdf [PDFファイルパス]`: PDFファイルから論文情報を抽出する場合
- `--url [論文URL]`: Web上の論文から情報を抽出する場合

---

## ステップ1: 準備とコンテキスト設定

1. 現在のタスクコンテキストを確立する:
  - 論文識別子: `[引数で与えられたDOI/PMID/タイトル]`
  - 日付: `[現在の日付をYYYYMMDD形式で取得]`
  - プランニングディレクトリパス: `.abstract-planning/[日付]-[論文識別子]/`
2. 上記プランニングディレクトリを作成する。
3. 以下のファイルを作成する:
  - `[プランニングディレクトリパス]/paper-info.md` (論文基本情報)
  - `[プランニングディレクトリパス]/content-extraction.md` (内容抽出)
  - `[プランニングディレクトリパス]/tasklist.md` (タスクリスト)
  - `[プランニングディレクトリパス]/slide-outline.md` (スライド構成)

## ステップ2: プロジェクト理解

1. `CLAUDE.md`を読み、プロジェクトの全体像と抄読会スライド作成ルールを把握する。

2. `format/abstract_reading_slide.md`を読み、抄読会スライドの標準フォーマットとテンプレートを理解する。

3. `slidev_write.md`でSlidevの基本機能を確認する。

## ステップ3: 論文情報の取得と抽出

1. 引数の種類に応じて論文情報を取得する:

  **A. DOIまたはPubMed IDが提供された場合:**
  - WebSearchツールまたはWebFetchツールを使用して論文情報を取得
  - 論文のタイトル、著者、雑誌名、出版年、DOI、アブストラクトを抽出

  **B. タイトルが提供された場合:**
  - WebSearchツールでタイトルを検索し、論文を特定
  - 論文のメタデータとアブストラクトを取得

  **C. PDFファイルパスが提供された場合:**
  - Readツールを使用してPDFファイルを読み込む
  - 論文の全文から情報を抽出

  **D. URLが提供された場合:**
  - WebFetchツールを使用してURLから論文情報を取得
  - 論文の全文またはアブストラクトを抽出

2. `paper-info.md`に論文の基本情報を記録する:
  ```markdown
  # 論文基本情報

  ## 書誌情報
  - タイトル: [論文タイトル]
  - 著者: [著者リスト]
  - 雑誌名: [雑誌名]
  - 巻: [巻数]
  - 号: [号数]
  - ページ: [ページ範囲]
  - 出版年: [出版年]
  - DOI: [DOI]
  - PubMed ID: [PMID]（該当する場合）

  ## アブストラクト
  [アブストラクト全文]

  ## キーワード
  - [キーワード1]
  - [キーワード2]
  - ...

  ## 発表情報
  - 発表者: [発表者名]（ユーザーから提供された場合）
  - 発表日: [日付]
  ```

## ステップ4: 論文内容の詳細分析

1. 取得した論文情報（アブストラクトまたは全文）を分析し、以下のセクションに分解する:
  - 背景（Background）
  - 目的（Objectives/Aims）
  - 方法（Methods）
  - 結果（Results）
  - 考察（Discussion）
  - 結論（Conclusions）

2. `content-extraction.md`に抽出した内容を構造化して記録する:
  ```markdown
  # 論文内容の構造化抽出

  ## 背景
  ### 既存の知見
  - [既存の知見1]
  - [既存の知見2]

  ### 研究の重要性
  - [重要性の説明]

  ### 未解決の問題
  - [問題点1]
  - [問題点2]

  ### 研究のギャップ
  - [ギャップの説明]

  ## 目的
  - [研究の目的1]
  - [研究の目的2]
  - [期待される成果]

  ## 方法
  ### 研究デザイン
  - デザイン: [デザインの種類]
  - 選択理由: [理由]
  - 長所: [長所]
  - 制限事項: [制限事項]

  ### 参加者選定
  - 適格基準: [基準リスト]
  - 除外基準: [基準リスト]
  - サンプルサイズ: [数値とその根拠]

  ### 評価項目
  - 主要評価項目: [項目]
  - 副次的評価項目: [項目リスト]
  - 測定方法: [方法の説明]

  ### 統計解析
  - 統計手法: [手法リスト]
  - 有意水準: [p値]
  - 欠損データの取り扱い: [方法]
  - 使用ソフトウェア: [ソフトウェア名]

  ## 結果
  ### 主要な結果
  - [結果1]
  - [結果2]
  - 統計的有意性: [p値、信頼区間]
  - 効果量: [数値]

  ### 副次的結果
  - [結果リスト]

  ### サブグループ解析
  - [解析結果]

  ### 有害事象
  - [有害事象リスト]（該当する場合）

  ## 考察
  ### 主要な発見とその意味
  - [発見1とその解釈]
  - [発見2とその解釈]

  ### 既存の知見との整合性
  - 支持する研究: [研究リスト]
  - 反論する研究: [研究リスト]
  - 矛盾の解釈: [説明]

  ### 研究の強みと限界
  - 強み: [リスト]
  - 限界: [リスト]
  - 一般化可能性: [評価]

  ### 臨床的意義
  - [意義の説明]

  ### 今後の研究課題
  - [課題リスト]

  ## 結論
  - [主要な知見の要約]
  - [研究分野への貢献]
  - [臨床実践への示唆]
  - [将来の研究方向]
  ```

3. 論文に図表が含まれている場合、重要な図表をリストアップする:
  ```markdown
  ## 重要な図表
  - Figure 1: [説明]
  - Figure 2: [説明]
  - Table 1: [説明]
  ```

## ステップ5: 計画フェーズ (スライド構成の設計)

1. `slide-outline.md`にスライドの詳細構成を設計する:
  ```markdown
  # 抄読会スライド構成

  ## 全体構成
  - 推定スライド枚数: 25-35枚
  - 推定発表時間: 15-20分

  ## スライドリスト

  ### 1. タイトルスライド (1枚)
  - 論文タイトル
  - 著者、雑誌名、出版年
  - 発表者名
  - 発表日

  ### 2. 背景 (3-4枚)
  - 背景1: 既存の知見と研究の重要性
  - 背景2: 未解決の問題点とギャップ
  - 背景3: 研究の具体的な目的と期待される成果

  ### 3. 方法 (4-5枚)
  - 方法1: 研究デザイン
  - 方法2: 参加者選定
  - 方法3: 評価項目と測定方法
  - 方法4: 統計解析

  ### 4. 結果 (4-6枚)
  - 結果1: 主要な結果
  - 結果2: 副次的結果
  - 結果3: 図表の説明（必要に応じて複数枚）

  ### 5. 考察 (4-5枚)
  - 考察1: 主要な発見とその意味
  - 考察2: 既存の知見との比較
  - 考察3: 研究の強みと限界
  - 考察4: 臨床的意義と今後の課題

  ### 6. 結論 (1枚)
  - 主要な知見の要約
  - 研究分野への貢献
  - 臨床実践への示唆
  - 将来の研究方向

  ### 7. 終了スライド (1枚)
  - 「ご清聴ありがとうございました」
  - 質疑応答
  - 発表者の連絡先（任意）
  ```

2. `tasklist.md`に実装タスクリストを作成する:
  ```markdown
  # 抄読会スライド作成タスクリスト

  ## 準備
  - [ ] 出力ファイル名を決定（例: abstract-[FirstAuthor]-[Year].md）
  - [ ] 必要な図表をリストアップ
  - [ ] 発表者情報の確認

  ## フロントマター設定
  - [ ] テーマをdefaultに設定
  - [ ] 背景色を白に設定（PDF出力を想定）
  - [ ] infoセクションに論文情報を記載
  - [ ] タイトルを設定

  ## タイトルスライド
  - [ ] 論文タイトルを記載
  - [ ] 著者情報を記載
  - [ ] 雑誌名、巻号、出版年を記載
  - [ ] 発表者名と日付を追加
  - [ ] 「発表開始」ボタンを配置

  ## 背景セクション
  - [ ] 背景スライド1: 既存の知見（v-clicksで段階的表示）
  - [ ] 背景スライド2: 未解決の問題点
  - [ ] 背景スライド3: 研究の目的

  ## 方法セクション
  - [ ] 方法スライド1: 研究デザイン（two-colsレイアウト使用）
  - [ ] 方法スライド2: 参加者選定
  - [ ] 方法スライド3: 評価項目と測定方法
  - [ ] 方法スライド4: 統計解析

  ## 結果セクション
  - [ ] セクションタイトルスライド（center layout）
  - [ ] 結果スライド1: 主要な結果
  - [ ] 結果スライド2: 副次的結果
  - [ ] 結果スライド3: 図表の説明（必要に応じて）

  ## 考察セクション
  - [ ] セクションタイトルスライド（center layout）
  - [ ] 考察スライド1: 主要な発見
  - [ ] 考察スライド2: 既存研究との比較
  - [ ] 考察スライド3: 研究の強みと限界
  - [ ] 考察スライド4: 今後の課題

  ## 結論セクション
  - [ ] 結論スライド（center layout、v-clicksで段階的表示）

  ## 終了スライド
  - [ ] 「ご清聴ありがとうございました」スライド
  - [ ] 質疑応答セクション
  - [ ] 発表者連絡先（任意）

  ## 最終調整
  - [ ] 全スライドでv-clicksが適切に使用されているか確認
  - [ ] レイアウトの統一性を確認
  - [ ] transitionの設定を確認
  - [ ] 文字サイズの確認（読みやすさ）
  - [ ] 図表の配置確認（必要な場合）

  ## 検証
  - [ ] プレビュー確認（npm run dev）
  - [ ] 全スライドの表示確認
  - [ ] アニメーションの動作確認
  - [ ] 誤字脱字チェック
  ```

**このステップが正常に完了したら、決して停止せず、ただちにステップ6に進むこと。**

## ステップ6: 実装ループ (tasklist.mdの完全消化)

**このステップは、`tasklist.md`の全タスクが `[x]` になるまで自動で繰り返されるループ処理です。**
**このステップが正常に完了したら、決して停止せず、ただちにステップ7に進むこと。**

**ループ開始:**

1. タスクリストの読み込み:
  - `[プランニングディレクトリパス]/tasklist.md`ファイルを読み込む。

2. 進捗の確認:
  - ファイル内に未完了タスク (`[ ]`) が存在するか確認する。
  - **もし未完了タスクが存在しない場合:** この実装ループは完了とみなし、ただちに**ステップ7**へ進む。
  - **もし未完了タスクが存在する場合:** 次の処理（3. タスクの実行）に進む。

3. タスクの実行:
  - `tasklist.md`の**先頭にある未完了タスク**を1つ特定する。
  - そのタスクを完了させるために必要な実装作業を実行する。
  - 以下のルールを厳守する:
    - **テンプレート**: `format/abstract_reading_slide.md`のフォーマットに厳密に従う
    - **ファイル名**: `pages/abstract-[FirstAuthor]-[Year].md`形式で保存
    - **フロントマター**: theme: default, background: white, PDF出力を想定
    - **v-clicks**: 段階的表示が必要な箇所に適切に使用
    - **レイアウト**: two-cols（方法セクション）、center（セクションタイトル）を適切に使用
    - **transition**: fade-outやslide-leftを適切に設定
    - **プレースホルダー**: `{{...}}`形式のプレースホルダーは実際の内容に置き換える
    - **図表**: 必要な場合は配置エリアを確保し、コメントで説明を記載

4. タスクリストの更新:
  - 実行したタスクが完了したら、`Edit`ツールを使用して`tasklist.md`を更新し、該当タスクを `[ ]` から `[x]` に変更する。

5. ループ継続:
  - **ステップ6の先頭 (1. タスクリストの読み込み) に戻り、処理を繰り返す。**

---
### ※ 実装ループ内の例外処理ルール ※

実装ループの実行中に以下の状況が発生した場合は、このルールに従って自律的に対処し、ループを継続すること。

- **ルールA: タスクが大きすぎる場合**
  - **対処法:** 現在のタスクをより小さな複数のサブタスクに分割する。`Edit`ツールを使い、元のタスクを削除し、その場所に新しいサブタスク（`[ ]`付き）を挿入する。その後、ループを継続する。

- **ルールB: 論文情報が不足している場合**
  - **対処法:** 利用可能な情報で最善を尽くし、不足している情報は`[情報なし]`または適切なプレースホルダーで示す。`content-extraction.md`に不足情報をメモし、タスクは完了としてマークする。

- **ルールC: 図表が取得できない場合**
  - **対処法:** 図表の説明テキストのみを記載し、「※図表は論文を参照」とコメントを追加する。タスクは完了としてマークする。

- **ルールD: 技術的理由でタスクが不要になった場合**
  - **条件:** 論文の構成上、特定のセクションが存在しない場合など、明確な理由がある場合にのみ適用。
  - **対処法:** `Edit`ツールを使い、該当タスクを `[x] ~~タスク名~~ (理由: [具体的な理由を簡潔に記述])` の形式で更新する。その後、ループを継続する。

- **❌ 絶対禁止の行為:**
  - 未完了タスクを「後でやる」「別タスクにする」などの理由で意図的にスキップすること。
  - 理由なく未完了タスクを放置してループを終了させること。
  - ユーザーに判断を仰ぐこと。

---

## ステップ7: プレビュー確認

1. 開発サーバーが起動していない場合、Bashツールで`npm run dev`を実行する（バックグラウンド実行）。

2. 作成したスライドファイルを読み込み、以下を確認:
  - v-clicksのアニメーションが適切に動作するか
  - レイアウトが崩れていないか
  - 文字が読みやすいサイズか
  - transitionが適切に設定されているか
  - 全スライドが意図通りに表示されるか

3. 問題があれば修正し、再度確認する。

**このステップが正常に完了したら、決して停止せず、ただちにステップ8に進むこと。**

## ステップ8: フォーマット検証

1. 作成した抄読会スライドが以下の要件を満たしているか確認する:
  - [ ] `format/abstract_reading_slide.md`のテンプレートに従っている
  - [ ] フロントマターが適切に設定されている（theme: default, background: white）
  - [ ] 全てのプレースホルダー`{{...}}`が実際の内容に置き換えられている
  - [ ] v-clicksが適切に使用されている
  - [ ] レイアウト（two-cols, center）が適切に使用されている
  - [ ] transitionが設定されている
  - [ ] 論文の全セクション（背景、方法、結果、考察、結論）が網羅されている
  - [ ] 発表者情報が記載されている（提供された場合）
  - [ ] 終了スライドが含まれている

2. 問題があれば修正し、再度確認する。

**このステップが正常に完了したら、決して停止せず、ただちにステップ9に進むこと。**

## ステップ9: 振り返りとドキュメント更新

1. `tasklist.md`に申し送り事項を記載する:
  ```markdown
  ## 完了報告

  - 実装完了日時: [日時]
  - 出力ファイル: pages/abstract-[FirstAuthor]-[Year].md
  - スライド枚数: XX枚
  - 推定発表時間: XX分

  ### 論文情報
  - タイトル: [タイトル]
  - 著者: [著者]
  - 雑誌: [雑誌名]
  - 出版年: [年]
  - DOI: [DOI]

  ### 使用したレイアウト
  - two-colsレイアウト: X箇所
  - centerレイアウト: X箇所
  - v-clicks: X箇所

  ### 不足している情報（要確認）
  - [不足情報リスト]

  ### 追加が望ましい図表
  - [図表リスト]

  ### 学んだこと・改善点
  - [記述]

  ### 次回への申し送り
  - [記述]
  ```

2. メインの`slides.md`に抄読会スライドをインポートする必要がある場合、その方法を提案する:
  ```markdown
  ---
  src: ./pages/abstract-[FirstAuthor]-[Year].md
  ---
  ```

3. git commitを実行して、完成した抄読会スライドを保存する:
  ```bash
  git add .
  git commit -m "Add abstract reading slides: [FirstAuthor] et al. ([Year])

  Created presentation for:
  [論文タイトル]

  [著者]
  [雑誌名], [出版年]

  Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
  ```

## 完了条件

このワークフローは、以下の全ての条件を満たした時点で自動的に完了となる。

- ステップ3: 論文情報が取得され、`paper-info.md`に記録されている。
- ステップ4: 論文内容が分析され、`content-extraction.md`に構造化されている。
- ステップ5: スライド構成が設計され、タスクリストが作成されている。
- ステップ6: `tasklist.md`の全てのタスクが完了状態（`[x]`または正当な理由でスキップ）になっている。
- ステップ7: プレビューで全スライドの表示が確認されている。
- ステップ8: フォーマット検証をパスしている。
- ステップ9: `tasklist.md`に申し送り事項が記載され、git commitが完了している。

この完了条件を満たすまで、自律的に思考し、問題解決を行い、作業を継続すること。

## 補足: 使用例

### 例1: DOIを使用
```bash
/create-abstract 10.1016/j.ijrobp.2023.01.001
```

### 例2: タイトルを使用
```bash
/create-abstract Radiation therapy outcomes in locally advanced lung cancer
```

### 例3: PDFファイルを使用
```bash
/create-abstract --pdf /Users/user/Documents/paper.pdf
```

### 例4: URLを使用
```bash
/create-abstract --url https://pubmed.ncbi.nlm.nih.gov/12345678/
```

## 補足: 論文情報の取得方法

このコマンドは以下の方法で論文情報を自動取得します：

1. **DOI**: CrossRef APIやDOI.orgから書誌情報を取得
2. **PubMed ID**: PubMed APIから論文情報とアブストラクトを取得
3. **タイトル**: Google ScholarやPubMedで検索し、最も関連性の高い論文を特定
4. **PDF**: PDFファイルを直接読み込み、テキストを抽出
5. **URL**: Webページから論文情報をスクレイピング

取得できない情報がある場合は、利用可能な情報のみでスライドを作成し、不足情報を明示します。
