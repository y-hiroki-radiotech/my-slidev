# Slide Style Rector Skill

## 概要
スタイルガイドとレイアウトパターンに基づいてスライドを自動整形するスキルです。

## 使用方法
```
/slide-style-rector [スライド範囲] [対象ファイル]
```

### 例
```
/slide-style-rector slides.md
/slide-style-rector slides.md 10-20
/slide-style-rector pages/flowchart.md
```

## 処理フロー

### 1. 事前確認
- 対象ファイルの存在確認
- 現在の状態をgit commitで保存

### 2. スライド分析
- 対象スライドを読み込み
- 各スライドの構造を分析
  - タイトルの有無
  - コンテンツの種類（テキスト、リスト、画像、コード等）
  - 現在のレイアウト

### 3. パターンマッチング
`format/layout-patterns.md` から最適なレイアウトパターンを選択

#### 判断基準
- **タイトルページ**: heroパターン（カテゴリ1）
- **セクション区切り**: section-titleパターン（カテゴリ1）
- **テキスト+画像**: image-rightまたはimage-leftパターン（カテゴリ2）
- **比較・対比**: two-colsパターン（カテゴリ3）
- **箇条書き中心**: list-focus-patternパターン（カテゴリ4）
- **図解中心**: diagram-focusパターン（カテゴリ5）
- **引用・強調**: quote-emphasisパターン（カテゴリ6）
- **特殊用途**: 該当するパターン（カテゴリ7）

### 4. スタイル適用
`docs/style-guide.md` のルールに従ってスタイルを適用

#### デザイン原則
- **1スライド1メッセージ**: 複数のトピックは分割
- **視覚的階層**: タイトル→サブタイトル→本文の順で情報を配置
- **余白の活用**: mt-5, mb-5などで適切な間隔を確保
- **色の使用**: プライマリカラー（#1e3a8a）をアクセントに使用
- **フォントサイズ**: 本文28pt以上を維持

#### 文体ルール
- コロン（：）を使用しない
- 感嘆符（！）や疑問符（？）を避ける
- 装飾的な絵文字を避ける
- 色による強調は控えめに

### 5. 整形実行
- レイアウトを変更
- スタイルクラスを追加
- 文体を調整
- 画像の配置を最適化

### 6. 確認とプレビュー
- 変更内容をプレビュー表示
- ユーザー確認を待つ
- 承認後に変更を適用

## 連携スキル

### slidev-diagram との連携
```
1. /slide-style-rector でレイアウトを整形
2. 画像が必要な箇所を特定
3. /slidev-diagram で画像を生成
4. 生成画像をスライドに配置
```

### layout-fix との連携
```
1. /slide-style-rector でスタイル整形
2. /layout-fix でレイアウト崩れを確認
3. 問題があれば再整形
```

## 参照ファイル
- `format/layout-patterns.md`: レイアウトパターン集
- `docs/style-guide.md`: スタイルガイド
- `slides.md`: 対象スライドファイル
- `CLAUDE.md`: プロジェクト全体の指示

## 実装例

### Before
```markdown
---
---

# リニアックの構造

リニアックは以下の構造を持っています：
- 電子銃
- 加速管
- ビーム制御システム
- 治療ヘッド

![リニアック](./images/linac.png)
```

### After
```markdown
---
layout: image-right
image: ./images/linac.png
---

# リニアックの構造

<div class="mt-5"></div>

## 主要コンポーネント

<div class="mt-5"></div>

<div class="text-xl">

- 電子銃
- 加速管
- ビーム制御システム
- 治療ヘッド

</div>
```

## 注意事項
- 既存のカスタムスタイルは可能な限り維持
- 画像パスは相対パスを維持
- フロントマターの他の設定は保持
- 変更前に必ずgit commitを実行

## エラーハンドリング
- ファイルが存在しない場合はエラーメッセージを表示
- レイアウトパターンが見つからない場合はdefaultを使用
- 画像パスが無効な場合は警告を表示
- git commit失敗時は処理を中断

## 期待される効果
- 一貫性のあるデザイン
- 読みやすいスライド
- メンテナンスしやすいコード
- 効率的な作業フロー
