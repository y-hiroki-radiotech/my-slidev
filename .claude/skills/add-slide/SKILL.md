---
name: add-slide
description: プレゼンテーション計画に基づいて新しいスライドセクションを完全自動で追加する
tools: [Read, Write, Edit, Glob, Grep, Bash, AskUserQuestion]
---

# 新規スライドセクションの追加

**引数:** スライドテーマ/トピック名 (例: `技術概要` または `市場分析`)

このスキルは、ユーザーの介入なしに、開始から完了まで完全に自動で実行されます。各ステップは完了後、ただちに次のステップへ移行してください。思考の途中でユーザーに確認を求めたり、作業を中断したりしないでください。

## 実行フロー

### ステップ1: 準備とコンテキスト設定

1. 現在のタスクコンテキストを確立:
  - スライドテーマ: ユーザーから提供されたテーマ名
  - 日付: 現在の日付をYYYYMMDD形式で取得
  - プランニングディレクトリ: `.slide-planning/[日付]-[テーマ名]/`

2. プランニングディレクトリを作成し、以下のファイルを作成:
  - `requirements.md` (要件定義)
  - `design.md` (設計)
  - `tasklist.md` (タスクリスト)

### ステップ2: プロジェクト理解

以下のファイルを読み込み、プロジェクトルールを理解:
- `CLAUDE.md` - プロジェクト全体像とルール
- `lesson_plan/第1回授業の全体像.md` - 授業構成
- `lesson_plan/本論部分の詳細.md` - 詳細内容
- `slidev_write.md` - Slidev基本機能
- `format/template_sides.md` - フォーマット

### ステップ3: 既存パターンの調査

1. `slides.md`を読み、現在の構成とスタイルを理解
2. `pages/`内の既存スライドを確認
3. Grepでテーマ関連キーワードを検索
4. 以下を特定:
  - 命名規則
  - レイアウトパターン
  - アイコン使用方法
  - 文字サイズとスタイル

### ステップ4: 計画フェーズ

プランニングファイルに以下を記述:

**requirements.md:**
- スライドテーマの目的と学習目標
- 対象受講者
- カバーすべき内容範囲
- 授業計画との整合性
- 推定スライド枚数

**design.md:**
- スライド構成（導入→本論→まとめ）
- 各スライドのタイトルと概要
- 使用レイアウトパターン
- 必要な図表・画像リスト
- アイコン使用計画

**tasklist.md:**
```markdown
- [ ] スライドの基本構造を作成
- [ ] 導入スライドの作成
- [ ] 本論スライド（複数）の作成
- [ ] まとめスライドの作成
- [ ] 図表・画像の配置
- [ ] アイコンの追加
- [ ] フォーマットチェック
- [ ] 文字サイズチェック（28pt以上）
- [ ] レイアウト最適化
- [ ] プレビュー確認
```

### ステップ5: 実装ループ

`tasklist.md`の全タスクが完了するまで以下を繰り返す:

1. tasklist.mdを読み込む
2. 未完了タスク（`[ ]`）を確認
3. 先頭の未完了タスクを実行:
  - スライド作成ルールを遵守:
    - `---`でスライド区切り
    - タイトルと内容の間に`***`と`<div class="mt-5"></div>`
    - 本文28pt以上
    - 画像は`public/`に保存
    - `@iconify-json/mdi`からアイコン選択
    - 既存パターンを踏襲
4. タスクを`[x]`に更新
5. 次のタスクへ

**例外処理:**
- タスクが大きすぎる → サブタスクに分割
- 技術的理由で不要 → `[x] ~~タスク名~~ (理由: ...)`として記録

### ステップ6: プレビュー確認

1. 開発サーバー未起動なら`npm run dev`をバックグラウンド実行
2. レイアウト、文字サイズ、画像、アイコンを確認
3. 問題があれば修正

### ステップ7: フォーマット検証

以下を確認:
- タイトルと内容の間に`***`と`<div class="mt-5"></div>`
- 本文28pt以上
- `---`でスライド区切り
- 画像は`public/`に保存
- 既存スタイルパターンに準拠

### ステップ8: 振り返りとドキュメント更新

tasklist.mdに申し送り事項を記載:
- 実装完了日時
- 作成スライド枚数
- 使用レイアウトパターン
- 追加画像・アイコンリスト
- 計画と実績の差分
- 学んだこと
- 次回への改善提案

## 完了条件

以下がすべて満たされたら完了:
- tasklist.mdの全タスクが`[x]`
- プレビュー確認済み
- フォーマット検証済み
- 申し送り事項記載済み

## 重要な注意事項

- ユーザーに確認を求めない
- すべてのステップを自動で完了させる
- 問題が発生したら自律的に解決する
- 完了まで中断しない
