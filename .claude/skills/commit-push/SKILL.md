---
name: commit-push
description: ステージされた変更から日本語のConventional Commitメッセージ候補を3つ生成し、ユーザーに選択させてコミット・プッシュを実行する。
---

# commit & push

ステージされた変更内容を分析し、日本語のConventional Commit形式でコミットメッセージ候補を生成し、ユーザーに選択させ、リモートへのプッシュまで行う。

## ワークフロー

### 1. ステージされた変更内容の確認

以下のコマンドを実行する

- `git diff --cached --stat` - 変更ファイル一覧
- `git diff --cached` - 詳細な差分

変更がない場合は「ステージされた変更内容はありません。 `git add` で変更をステージしてから再度実行してください。」

### 2. コミットメッセージ候補の生成

変更内容を分析し、日本語のConventional Commit形式でコミットメッセージ候補を3つ生成する。

**フォーマット**: `type(scope): 説明`

- `type`: feat, fix, docs, style, refactor, test, chore
- `scope`: 変更対象のモジュール/機能名（任意）
- `説明`: 日本語で簡潔に(50文字以内推奨)

**候補の多様性**

- 候補1: 最も具体的で詳細な説明
- 候補2: やや抽象的・簡潔な説明
- 候補3: 異なる観点（別のtype/scopeの可能性）

### 3. ユーザーへの選択肢提示

AskUserQuestionツールを使用する。

- `header`: "コミット"
- `question`: "コミットメッセージを選択してください"
- `options`: 生成した3つの候補（labelにメッセージ、descriptionに補足説明）

### 4. コミットの実行

選択されたメッセージ（または「その他」で入力されたカスタムメッセージ）でコミット実行。

### 5. プッシュの確認

AskUserQuestionツールを使用する。

- `header`: "プッシュ"
- `question`: "リモートにプッシュしますか？"
- `options`:
  - `label`: "はい"
  - `description`: "現在のブランチをoriginにプッシュ"
  - `label`: "いいえ"
  - `description`: "コミットのみで終了"

「プッシュする」が選択された場合は以下を実行する。

1. `git rev-parse --abbrev-ref HEAD` で現在のブランチ名を取得
2. `git push -u origin <ブランチ名>` でリモートリポジトリにプッシュ

## 注意事項

- コミットメッセージは日本語で生成してください。
- コミットメッセージはConventional Commit形式に従ってください。
- 候補は必ず3つ提示してください。
- ユーザーが選択または編集できるようにしてください。
- プッシュの前に必ずユーザーの確認を得てください。
